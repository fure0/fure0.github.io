---
layout: post
categories: "os"
title: "Process And Thread"
author: "TY_K"
---

<style>
    .post img {
        margin : 0
    }
</style>

## プロセス&スレッド

> プロセス:プログラムのメモリ上で実行されている作業

> スレッド:プロセスの中で実行される様々な流れの単位

基本的にプロセス毎に最小1つのスレッドを所有(メインスレッドを含む)

![process](https://user-images.githubusercontent.com/20508342/79044560-c1d60000-7c40-11ea-9464-cca21e18feb2.jpeg)

プロセスはそれぞれ別のアドレス空間を割り当てる(独立的)

* Code:コード自体を構成するメモリ領域(プログラムコマンド)

* Data:全域変数、静的変数、配列など(初期化されたデータ)

* Heap:動的割り当て時に使用(new( )、mallock( )など)

* Stack:地域変数、媒介変数、リターン値(臨時メモリ領域)

スレッドはStackだけを別に割り当ててもらい、残りの領域は互いに共有

一つのプロセスが生成されるとき、基本的に一つのスレッドも生成

プロセスは自分だけの固有空間とリソースを割り当てられて使用するのに対し、スレッドは他のスレッドと空間、リソースを共有しながら使用する違いが存在する。

## マルチプロセス

> 1つのコンピュータに複数のCPUを装着し、1つ以上のプロセスを同時に処理(並列)

長所:安全性(メモリ侵犯問題をOSレベルで解決)

短所:それぞれ独立したメモリ領域を持っており、作業量が多いほどオーバーヘッド発生。 Context Switchingによる性能低下

### Context Switchingとは?

プロセスの状態情報を保存·復元する一連の過程

つまり、動作中のプロセスが待機しながら当該プロセスの状態を保管し、待機していた次のプロセスが動作しながら以前保管していたプロセスの状態を復旧する過程をいう。

プロセスは各独立したメモリ領域を割り当てられて使われるので、キャッシュメモリ初期化のような重い作業が進んだときにオーバーヘッドが発生する問題が存在する

## マルチスレッド

> 1つのアプリケーションで複数のスレッドを構成し、各スレッドが1つの作業を処理すること

スレッドが共有メモリーを通じて多数の作業を同時に処理するようにしてくれる。

長所:独立のプロセスに比べて共有メモリ分の時間、リソース損失が減少、全域の変数と静的変数に対する資料を共有可能

短所:安全性問題。 一つのスレッドがデータ空間を壊すと、すべてのスレッドが作動不能状態(共有メモリを持つため)

マルチスレッドの安全性に対する短所は、Critical Section技法によって備えること。

1つのスレッドが共有データの値を変更する時点で、他のスレッドがその値を読み取ろうとする時に発生する問題を解決するための同期過程

相互排除、進行、限られた待機を満たさなければならない。