---
layout: post
categories: "web"
title: "Http Get and Post"
author: "TY_K"
---

## GETとPOST

### HTTP

HTTPは、ウェブ上でクライアントとサーバ間で要請(リクエスト)/応答(リスポンス)でデータをやり取りできるプロトコルです。 クライアントがHTTPプロトコルを通じてサーバに要請を送ると、サーバは要請に合う応答をクライアントに送信します。 このとき、HTTP 要請に含まれるHTTP メソッドは、サーバーが要請を行うためにしなければならない行動を表示する用途に使用します。 このHTTPメソッドのうち、GETとPOSTの特徴と異なる点をご紹介します。

### GET

* HTTP/1.1スペックのRFC2616のSection9.3によると、GETはサーバから情報を照会するために設計されたメソッドです。
* GETはリクエストを送信するときに必要なデータをBodyに保存せず、クエリストリングを通じて送信します。
> URLの最後に?と共に名前と値で対をなすリクエストパラメータをクエストリングと呼びます。(もし、要求パラメータが複数あるなら、&につなげます。)

### クエリストリングを含むURLのサンプルは以下の通りです。

> www.example-url.com/resources?name1=value1&name2=value2

そしてGETは不要なリクエストを制限するためにリクエストがキャッシュされる場合があります。 

js、css、画像のような静的コンテンツは、データ量が大きく、変更されることが少ないため、繰り返し同じリクエストを送る必要がありません。

静的コンテンツを要請した後は、ブラウザではリクエストをキャッシュしておいて、同一のリクエストが発生したときにサーバーにリクエストを送らずにキャッシュされたデータを使用します。

そこでフロントエンドの開発を行うと静的コンテンツがキャッシュされ、コンテンツを変更しても内容が変わらない場合がしばしば発生します。 この時は、ブラウザのキャッシュを削除すると、再びコンテンツを照会するためにサーバーにリクエストを送るようになります。

(簡単にSHIFT + F5で出来ます。)

### POST

* POSTはリソースを生成/変更するために設計されたため、GETと違って送信すべきデータをHTTPメッセージのBodyに入れて送信します。
* HTTPメッセージのBodyは長さの制限なくデータを転送できます。 そのため、POSTリクエストはGETとは異なり、大容量のデータを転送することができます。

このように、POSTはデータがBodyに転送され、内容が目に見えず、GETよりセキュリティの面で安全だと考えられますが、POSTのリクエストもクローム開発者のツール、Fiddlerのようなツールでリクエスト内容を確認できるため、デリケートなデータの場合には必ず暗号化して転送しなければなりません。

そして、POSTに要請を送る時は、要請ヘッダのContent-Typeに要請データのタイプを表示する必要があります。 データタイプを表示しないと、サーバは内容やURLに含まれるリソースの拡張字名などからデータタイプを類推します。 もし、分からない場合にはapplication/octet-streamで要請を処理します。

### GETとPOSTの差異

> GETはIdempotent、POSTはNon-idempotentに設計されました。

> Idempotent(冪等)は数学的概念で次のように表すことができます。

> (数学や電算学で演算の一性質を表すもので、演算を複数回適用しても結果が変わらない性質)

つまり、冪等とは、同じ演算を何度も実行しても同じ結果が表れなければなりません。

ここでGETがIdempotentするように設計されたということは、GETでサーバに同じ要請を何度も送信しても同じ応答が返ってくるということを意味します。

これによって、GETは設計原則に従ってサーバのデータや状態を変更させなければIdempotentされませんので、主に照会をするときに使用しなければなりません。 

例えば、ブラウザでウェブページを開いてみたり、掲示文を読むなどの照会をする行為はGETで要請することになります。

逆に、POSTはNon-idempotentするため、サーバに同じリクエストを何度も送信しても応答は常に異なる場合があります。 

これによって、POSTはサーバーの状態やデータを変更させる時に使用されます。 掲示文を書くとサーバに掲示文が保存され、掲示文を削除するとそのデータが消えるなど、POSTに要請するとサーバの何かは変更されるように使用されます。 

このように、POSTは生成、修正、削除に使用できますが、生成にはPOST、修正はPUTまたはPATCH、削除はDELETEがより用途に合うメソッドと言えます。

最後に、ウェブページを照会するとき、リンクして特定のページに移動するには、そのリンクに関する情報が必要ですが、POSTはリクエストデータがBodyに入っているため、リンク情報を取得できません。 反面、GETはURLにリクエストパラメータを持っているので、リンクを張るとき、URLにパラメータを使ってさらにディテールにページをリンクすることができます。

GETとPOSTはこのように大きな違いがあるので、設計原則に従って適切な用途で使用する必要があります。

[参照][GetPost]

[GetPost]: https://hongsii.github.io/2017/08/02/what-is-the-difference-get-and-post/ "GetPost"